import"./tab-xbr07iho.js";import{u as U,v as L,E as T,a as A,b as F,c as I,d as B,e as P,f as j}from"./system-BR4f4oBM.js";import"./request-CcomvHR9.js";import"./el-tooltip-GGf4AG67.js";import{i as $}from"./index-Cc46_B1g.js";import{_ as q}from"./WenZhenDetail-BTf9ePO_.js";import{r,o as x,c as g,d as y,f as e,w as o,ac as G,h as m,e as M,j as O,k as R}from"./index-CIZYmY3Y.js";import"./refs-BC3KiGTx.js";const H={key:0},J={key:1},te={__name:"Index",setup(K){const _=r(null),i=r({}),k=async()=>{i.value=await U()},z=()=>{const a=$(_.value),l={title:{text:"订单量趋势图"},tooltip:{trigger:"axis"},legend:{data:["订单量"],bottom:"0%"},xAxis:{type:"category",boundaryGap:!1,data:i.value.dayList,axisLine:{lineStyle:{}},axisLabel:{}},yAxis:{type:"value",axisLine:{lineStyle:{}},axisLabel:{}},series:[{name:"订单量",type:"line",smooth:!1,lineStyle:{color:"#25ACFF"},symbol:"circle",symbolSize:5,itemStyle:{color:"#25ACFF"},data:i.value.count}]};a.setOption(l),window.addEventListener("resize",a.resize)};x(async()=>{await k(),console.log(i.value),z()});const f=r([]),n=r({page:1,size:10,total:null}),u=async()=>{const{list:a,total:l}=await L(n.value.page,n.value.size);f.value=a,n.value.total=l};x(()=>{u()});const v=r(),b=(a,l)=>{v.value.open(a,l)},h=a=>{n.value.page=1,n.value.size=a,u()},w=a=>{n.value.page=a,u()};return(a,l)=>{const c=O,p=A,C=F,V=I,d=R,s=B,E=P,D=j,S=T;return g(),y(G,null,[e(S,null,{default:o(()=>[e(V,null,{default:o(()=>[e(p,{span:20},{default:o(()=>[e(V,{gutter:10},{default:o(()=>[e(p,{span:4},{default:o(()=>[e(c,{modelValue:a.searchID,"onUpdate:modelValue":l[0]||(l[0]=t=>a.searchID=t),placeholder:"请输入id"},null,8,["modelValue"])]),_:1}),e(p,{span:4,style:{"margin-left":"20px"}},{default:o(()=>[e(c,{modelValue:a.patientName,"onUpdate:modelValue":l[1]||(l[1]=t=>a.patientName=t),placeholder:"请输入患者姓名"},null,8,["modelValue"])]),_:1}),e(p,{span:4,style:{"margin-left":"20px"}},{default:o(()=>[e(c,{modelValue:a.doctorName,"onUpdate:modelValue":l[2]||(l[2]=t=>a.doctorName=t),placeholder:"请输入医师姓名"},null,8,["modelValue"])]),_:1}),e(p,{span:11,style:{display:"flex","align-items":"center"}},{default:o(()=>[e(C,{modelValue:a.value1,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value1=t),placeholder:"请选择开始日期",style:{"margin-left":"20px"}},null,8,["modelValue"]),e(C,{modelValue:a.value2,"onUpdate:modelValue":l[4]||(l[4]=t=>a.value2=t),"arrow-control":"",placeholder:"请选择结束日期",style:{"margin-left":"20px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{span:3,style:{"margin-left":"30px"}},{default:o(()=>[e(d,{type:"primary",onClick:u},{default:o(()=>[m("搜索")]),_:1}),e(d,{onClick:a.reset},{default:o(()=>[m("重置")]),_:1},8,["onClick"])]),_:1})]),_:1}),M("div",{ref_key:"chart",ref:_,style:{width:"100%",height:"400px","margin-top":"20px"}},null,512),e(E,{data:f.value,style:{width:"100%","margin-top":"20px"}},{default:o(()=>[e(s,{prop:"drug_id",label:"ID",width:"80px"}),e(s,{prop:"patient_username",label:"患者姓名"}),e(s,{prop:"physician_username",label:"医师姓名"}),e(s,{prop:"hospital",label:"医院名称"}),e(s,{prop:"prop",label:"病例详情"},{default:o(({row:t})=>[e(d,{type:"text",onClick:N=>b(t,"0")},{default:o(()=>[m("查看")]),_:2},1032,["onClick"])]),_:1}),e(s,{prop:"create_time",label:"创建时间"}),e(s,{prop:"already_buy",label:"派送情况"},{default:o(({row:t})=>[t.already_buy===1?(g(),y("span",H,"已派送")):(g(),y("span",J,"未派送"))]),_:1}),e(s,{prop:"prop",label:"操作"},{default:o(({row:t})=>[e(d,{type:"text",onClick:N=>b(t,"1")},{default:o(()=>[m("审批")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(D,{"current-page":n.value.page,"onUpdate:currentPage":l[5]||(l[5]=t=>n.value.page=t),"page-size":n.value.size,"onUpdate:pageSize":l[6]||(l[6]=t=>n.value.size=t),"page-sizes":[2,3,5,10],background:!0,layout:"jumper, total, sizes, prev, pager, next",total:n.value.total,onSizeChange:h,onCurrentChange:w,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),e(q,{ref_key:"dialog",ref:v},null,512)],64)}}};export{te as default};
